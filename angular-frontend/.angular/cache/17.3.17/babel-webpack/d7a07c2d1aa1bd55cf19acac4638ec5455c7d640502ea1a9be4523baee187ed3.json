{"ast":null,"code":"import { CommonModule } from '@angular/common';\nimport { ReactiveFormsModule, Validators } from '@angular/forms';\nimport * as i0 from \"@angular/core\";\nimport * as i1 from \"@angular/forms\";\nimport * as i2 from \"../../../services/leave.service\";\nimport * as i3 from \"../../../services/auth.service\";\nimport * as i4 from \"@angular/router\";\nimport * as i5 from \"@angular/common\";\nfunction LeaveFormComponent_option_51_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementStart(0, \"option\", 24);\n    i0.ɵɵtext(1);\n    i0.ɵɵelementEnd();\n  }\n  if (rf & 2) {\n    const type_r1 = ctx.$implicit;\n    i0.ɵɵproperty(\"value\", type_r1.LEAVETYPE);\n    i0.ɵɵadvance();\n    i0.ɵɵtextInterpolate1(\" \", type_r1.LEAVETYPE, \" \");\n  }\n}\nexport let LeaveFormComponent = /*#__PURE__*/(() => {\n  class LeaveFormComponent {\n    constructor(formBuilder, leaveService, authService, router) {\n      this.formBuilder = formBuilder;\n      this.leaveService = leaveService;\n      this.authService = authService;\n      this.router = router;\n      this.leaveTypes = [];\n      this.currentUser = null;\n      this.loading = false;\n      this.currentUser = this.authService.getCurrentUser();\n      this.leaveForm = this.formBuilder.group({\n        DATESTART: ['', Validators.required],\n        DATEEND: ['', Validators.required],\n        SHIFTTIME: ['', Validators.required],\n        TYPEOFLEAVE: ['', Validators.required],\n        REASON: ['', Validators.required]\n      });\n    }\n    ngOnInit() {\n      this.loadLeaveTypes();\n    }\n    loadLeaveTypes() {\n      this.leaveService.getLeaveTypes().subscribe({\n        next: types => this.leaveTypes = types\n      });\n    }\n    onSubmit() {\n      if (this.leaveForm.valid && this.currentUser) {\n        this.loading = true;\n        const leave = {\n          ...this.leaveForm.value,\n          EMPLOYID: this.currentUser.EMPLOYID,\n          NODAYS: 0,\n          // Will be calculated in backend\n          LEAVESTATUS: 'PENDING',\n          ADMINREMARKS: 'N/A',\n          DATEPOSTED: new Date().toISOString().split('T')[0]\n        };\n        this.leaveService.createLeave(leave).subscribe({\n          next: response => {\n            if (response.success) {\n              this.router.navigate(['/leaves']);\n            }\n            this.loading = false;\n          },\n          error: () => {\n            this.loading = false;\n          }\n        });\n      }\n    }\n    goBack() {\n      this.router.navigate(['/leaves']);\n    }\n    static {\n      this.ɵfac = function LeaveFormComponent_Factory(t) {\n        return new (t || LeaveFormComponent)(i0.ɵɵdirectiveInject(i1.FormBuilder), i0.ɵɵdirectiveInject(i2.LeaveService), i0.ɵɵdirectiveInject(i3.AuthService), i0.ɵɵdirectiveInject(i4.Router));\n      };\n    }\n    static {\n      this.ɵcmp = /*@__PURE__*/i0.ɵɵdefineComponent({\n        type: LeaveFormComponent,\n        selectors: [[\"app-leave-form\"]],\n        standalone: true,\n        features: [i0.ɵɵStandaloneFeature],\n        decls: 61,\n        vars: 6,\n        consts: [[1, \"row\", \"justify-content-center\"], [1, \"col-md-8\"], [1, \"card\", \"shadow\"], [1, \"card-header\"], [1, \"card-body\"], [3, \"ngSubmit\", \"formGroup\"], [1, \"row\"], [1, \"col-md-6\"], [1, \"mb-3\"], [1, \"form-label\"], [\"type\", \"text\", \"readonly\", \"\", 1, \"form-control\", 3, \"value\"], [\"type\", \"date\", \"formControlName\", \"DATESTART\", 1, \"form-control\"], [\"type\", \"date\", \"formControlName\", \"DATEEND\", 1, \"form-control\"], [\"formControlName\", \"SHIFTTIME\", 1, \"form-control\"], [\"value\", \"\"], [\"value\", \"All Day\"], [\"value\", \"AM\"], [\"value\", \"PM\"], [\"formControlName\", \"TYPEOFLEAVE\", 1, \"form-control\"], [3, \"value\", 4, \"ngFor\", \"ngForOf\"], [\"rows\", \"3\", \"formControlName\", \"REASON\", 1, \"form-control\"], [1, \"d-grid\", \"gap-2\", \"d-md-flex\", \"justify-content-md-end\"], [\"type\", \"button\", 1, \"btn\", \"btn-secondary\", \"me-md-2\", 3, \"click\"], [\"type\", \"submit\", 1, \"btn\", \"btn-primary\", 3, \"disabled\"], [3, \"value\"]],\n        template: function LeaveFormComponent_Template(rf, ctx) {\n          if (rf & 1) {\n            i0.ɵɵelementStart(0, \"div\", 0)(1, \"div\", 1)(2, \"div\", 2)(3, \"div\", 3)(4, \"h4\");\n            i0.ɵɵtext(5, \"Apply for Leave\");\n            i0.ɵɵelementEnd()();\n            i0.ɵɵelementStart(6, \"div\", 4)(7, \"form\", 5);\n            i0.ɵɵlistener(\"ngSubmit\", function LeaveFormComponent_Template_form_ngSubmit_7_listener() {\n              return ctx.onSubmit();\n            });\n            i0.ɵɵelementStart(8, \"div\", 6)(9, \"div\", 7)(10, \"div\", 8)(11, \"label\", 9);\n            i0.ɵɵtext(12, \"Employee ID\");\n            i0.ɵɵelementEnd();\n            i0.ɵɵelement(13, \"input\", 10);\n            i0.ɵɵelementEnd()();\n            i0.ɵɵelementStart(14, \"div\", 7)(15, \"div\", 8)(16, \"label\", 9);\n            i0.ɵɵtext(17, \"Name\");\n            i0.ɵɵelementEnd();\n            i0.ɵɵelement(18, \"input\", 10);\n            i0.ɵɵelementEnd()()();\n            i0.ɵɵelementStart(19, \"div\", 6)(20, \"div\", 7)(21, \"div\", 8)(22, \"label\", 9);\n            i0.ɵɵtext(23, \"Date From\");\n            i0.ɵɵelementEnd();\n            i0.ɵɵelement(24, \"input\", 11);\n            i0.ɵɵelementEnd()();\n            i0.ɵɵelementStart(25, \"div\", 7)(26, \"div\", 8)(27, \"label\", 9);\n            i0.ɵɵtext(28, \"Date To\");\n            i0.ɵɵelementEnd();\n            i0.ɵɵelement(29, \"input\", 12);\n            i0.ɵɵelementEnd()()();\n            i0.ɵɵelementStart(30, \"div\", 6)(31, \"div\", 7)(32, \"div\", 8)(33, \"label\", 9);\n            i0.ɵɵtext(34, \"Shift Time\");\n            i0.ɵɵelementEnd();\n            i0.ɵɵelementStart(35, \"select\", 13)(36, \"option\", 14);\n            i0.ɵɵtext(37, \"Select Shift\");\n            i0.ɵɵelementEnd();\n            i0.ɵɵelementStart(38, \"option\", 15);\n            i0.ɵɵtext(39, \"All Day\");\n            i0.ɵɵelementEnd();\n            i0.ɵɵelementStart(40, \"option\", 16);\n            i0.ɵɵtext(41, \"AM\");\n            i0.ɵɵelementEnd();\n            i0.ɵɵelementStart(42, \"option\", 17);\n            i0.ɵɵtext(43, \"PM\");\n            i0.ɵɵelementEnd()()()();\n            i0.ɵɵelementStart(44, \"div\", 7)(45, \"div\", 8)(46, \"label\", 9);\n            i0.ɵɵtext(47, \"Leave Type\");\n            i0.ɵɵelementEnd();\n            i0.ɵɵelementStart(48, \"select\", 18)(49, \"option\", 14);\n            i0.ɵɵtext(50, \"Select Leave Type\");\n            i0.ɵɵelementEnd();\n            i0.ɵɵtemplate(51, LeaveFormComponent_option_51_Template, 2, 2, \"option\", 19);\n            i0.ɵɵelementEnd()()()();\n            i0.ɵɵelementStart(52, \"div\", 8)(53, \"label\", 9);\n            i0.ɵɵtext(54, \"Reason\");\n            i0.ɵɵelementEnd();\n            i0.ɵɵelement(55, \"textarea\", 20);\n            i0.ɵɵelementEnd();\n            i0.ɵɵelementStart(56, \"div\", 21)(57, \"button\", 22);\n            i0.ɵɵlistener(\"click\", function LeaveFormComponent_Template_button_click_57_listener() {\n              return ctx.goBack();\n            });\n            i0.ɵɵtext(58, \" Cancel \");\n            i0.ɵɵelementEnd();\n            i0.ɵɵelementStart(59, \"button\", 23);\n            i0.ɵɵtext(60);\n            i0.ɵɵelementEnd()()()()()()();\n          }\n          if (rf & 2) {\n            i0.ɵɵadvance(7);\n            i0.ɵɵproperty(\"formGroup\", ctx.leaveForm);\n            i0.ɵɵadvance(6);\n            i0.ɵɵproperty(\"value\", ctx.currentUser == null ? null : ctx.currentUser.EMPLOYID);\n            i0.ɵɵadvance(5);\n            i0.ɵɵproperty(\"value\", ctx.currentUser == null ? null : ctx.currentUser.EMPNAME);\n            i0.ɵɵadvance(33);\n            i0.ɵɵproperty(\"ngForOf\", ctx.leaveTypes);\n            i0.ɵɵadvance(8);\n            i0.ɵɵproperty(\"disabled\", !ctx.leaveForm.valid || ctx.loading);\n            i0.ɵɵadvance();\n            i0.ɵɵtextInterpolate1(\" \", ctx.loading ? \"Submitting...\" : \"Submit Leave Application\", \" \");\n          }\n        },\n        dependencies: [CommonModule, i5.NgForOf, ReactiveFormsModule, i1.ɵNgNoValidate, i1.NgSelectOption, i1.ɵNgSelectMultipleOption, i1.DefaultValueAccessor, i1.SelectControlValueAccessor, i1.NgControlStatus, i1.NgControlStatusGroup, i1.FormGroupDirective, i1.FormControlName],\n        encapsulation: 2\n      });\n    }\n  }\n  return LeaveFormComponent;\n})();","map":null,"metadata":{},"sourceType":"module","externalDependencies":[]}